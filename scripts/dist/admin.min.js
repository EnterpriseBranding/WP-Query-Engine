jQuery(function(e){"use strict";var n,t=function(){n=e.map(e("#widgets-right .wpcl_ruleset_wrapper"),function(n){return new function(n){var t,r,a,i=function(n){n.preventDefault();var i=e(t.replace(new RegExp("{{INDEX}}","gi"),a++));l(i).hide().appendTo(r).fadeIn(300)},o=function(e){e.preventDefault(),e.data.obj.hide(300).remove()},l=function(e){var n=e.find(".rule_type"),t=e.find(".rule_selector");return n.on("change",{type:n,selector:t},d),e.find(".remove_rule").on("click",{obj:e},o),e},d=function(e){if(void 0!==wpcl_query_engine_admin[e.data.type.val()]){var n=wpcl_query_engine_admin[e.data.type.val()];e.data.selector.find("option").remove();for(var t in n)e.data.selector.append('<option value="'+n[t]+'">'+n[t]+"</option>")}};r=n.find(".rulesets"),t=n.find("#ruleset_template").html(),a=parseInt(r.data("ruleset-index")),e.map(r.find(".ruleset"),function(n){return l(e(n))}),n.on("click",".add_rule",i)}(e(n))})};t(),e(document).on("widget-updated",t),e(document).on("widget-added",t)}),jQuery(function(e){"use strict";var n=function(){e.each(e(".wpcl_rules_wrapper"),function(n,t){var r=e(t);return r.is(":visible")?r.hasClass("wpcl-js")?null:new function(n){var t,r,a,i,o,l,d=function(n){n.preventDefault();var i=f(e(r.replace(new RegExp("{{INDEX}}","gi"),++a)));o.append(i),t.push(i),l.addClass("hidden")},p=function(e){e.preventDefault();var n=c(e.data.rule);!1!==n&&(t[n].remove(),t.splice(n,1),0===t.length&&l.removeClass("hidden"))},u=function(e){var n=c(e.data.rule);if(!1!==n){var r=wpcl_query_engine_acf.query_options[t[n].$type.val()].choices;t[n].$selection.find("option").remove();for(var a in r)t[n].$selection.append('<option value="'+r[a]+'">'+r[a]+"</option>");"post_type"===t[n].$type.val()?(t[n].$operator.prop("disabled","disabled"),t[n].$operator.val("IN")):t[n].$operator.removeAttr("disabled")}},c=function(e){for(var n=!1,r=0;r<t.length;r++)if(e.is(t[r])){n=r;break}return n},f=function(e){return e.$button=e.find('[data-action="remove"]'),e.$type=e.find(".type"),e.$selection=e.find(".selection"),e.$operator=e.find(".operator"),e.$button.on("click",{rule:e},p),e.$type.on("change",{rule:e},u),e};return n.addClass("wpcl-js"),o=n.find(".rule-container"),r=n.find("#wpcl-field-template").html(),i=n.find('[data-action="add"]'),l=n.find(".wpcl-notice"),t=e.map(n.find(".wpcl_rule_fieldset"),function(n){return f(e(n))}),i.on("click",d),a=t.length,n}(r):null})};n(),acf.add_action("append",n)});
//# sourceMappingURL=admin.min.js.map